"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classPrivateFieldGet(e,t){return _classApplyDescriptorGet(e,_classExtractFieldDescriptor(e,t,"get"))}function _classApplyDescriptorGet(e,t){return t.get?t.get.call(e):t.value}function _classPrivateFieldSet(e,t,n){return _classApplyDescriptorSet(e,_classExtractFieldDescriptor(e,t,"set"),n),n}function _classExtractFieldDescriptor(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function _classApplyDescriptorSet(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}document.addEventListener("DOMContentLoaded",function(){var a=new WeakMap,e=function(){function n(e,t){_classCallCheck(this,n),a.set(this,{writable:!0,value:0}),this.form=e,this.fields=t}return _createClass(n,[{key:"initialize",value:function(){this.validateOnEntry(),this.validateOnSubmit()}},{key:"validateOnSubmit",value:function(){var o=this,r=this;this.form.addEventListener("submit",function(e){e.preventDefault(),_classPrivateFieldSet(o,a,0),r.fields.forEach(function(e){e=o.form.elements[e];e&&r.validateFields(e)});var t,n,i,e=new FormData(o.form);0===_classPrivateFieldGet(o,a)&&(t=o.form.parentElement.querySelector(".form__upload-file"),n=o.form.parentElement.querySelector(".btn"),document.querySelector(".popup.popup-open"),i=document.querySelector("#successSend"),n.classList.add("btn_point-none"),fetch("/send-letter.php",{method:"POST",body:e}).then(function(e){console.log(e),e.json()}).then(function(e){t&&(t.innerHTML="Или прикрепить файл"),o.form.reset(),n.classList.remove("btn_point-none"),setTimeout(function(){L(i)},1e3)}).catch(function(e){console.error(e),console.log("wrong"),n.classList.remove("btn_point-none")}))})}},{key:"validateOnEntry",value:function(){var n=this,i=this;this.fields.forEach(function(e){var t=n.form.elements[e];t&&t.addEventListener("input",function(e){i.validateFields(t)})})}},{key:"validateFields",value:function(e){""===e.value.trim()?(this.setStatus(e,"".concat(e.nextElementSibling.innerText," не может быть пустым"),"error"),_classPrivateFieldSet(this,a,1+ +_classPrivateFieldGet(this,a))):"email"===e.type?/\S+@\S+\.\S+/.test(e.value)?this.setStatus(e,null,"success"):(this.setStatus(e,"Введите корректный email","error"),_classPrivateFieldSet(this,a,1+ +_classPrivateFieldGet(this,a))):this.setStatus(e,null,"success")}},{key:"setStatus",value:function(e,t,n){var i=e.parentElement.querySelector(".icon-success"),o=e.parentElement.querySelector(".icon-error"),r=e.parentElement.querySelector(".error-message");"success"===n&&(o&&o.classList.add("hidden"),r&&(r.innerText=""),i.classList.remove("hidden"),e.classList.remove("input-error")),"error"===n&&(i&&i.classList.add("hidden"),e.parentElement.querySelector(".error-message").innerText=t,o.classList.remove("hidden"),e.classList.add("input-error"))}}]),n}(),t=document.querySelector("#formOne");t&&new e(t,["fio","email","company","comment"]).initialize();t=document.querySelector("#formTwo");t&&new e(t,["fio","email","company","comment"]).initialize();t=document.querySelector("#formThree");t&&new e(t,["fio","field_activity","email","company","comment"]).initialize();t=document.querySelector("#formFour");t&&new e(t,["fio","email","link","phone"]).initialize();t=document.querySelector("#formFive");t&&new e(t,["fio","email","link","phone"]).initialize();t=document.querySelectorAll(".js-policy");t&&t.forEach(function(n){n.addEventListener("click",function(){var e=n.checked,t=n.parentNode.nextElementSibling.childNodes[1];e?t&&t.removeAttribute("disabled"):t&&t.setAttribute("disabled","disabled")})});t=document.querySelectorAll(".inputFile");Array.prototype.forEach.call(t,function(e){var n=e.nextElementSibling,i=n.innerHTML;e.addEventListener("change",function(e){var t="";(t=this.files&&1<this.files.length?(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value.split("\\").pop())?n.querySelector("span").innerHTML=t:n.innerHTML=i})});var i,n,o,r,s=document.querySelector("#google-map");s&&(l=document.querySelector(".rd-google-map__locations").innerHTML,o={info:{icon:"/local/templates/innodata/dist/images/map-marker.svg"}},r=[{popupInfo:l,LatLng:[{lat:(n={lat:55.7518373,lng:48.7522174}).lat,lng:n.lng}],type:"info"}],i=new google.maps.Map(s,{zoom:17,center:n,scrollwheel:!1}),r.forEach(function(e){var t=new google.maps.Marker({position:e.LatLng[0],icon:o[e.type].icon,map:i}),n=new google.maps.InfoWindow({content:e.popupInfo});t.addListener("click",function(){n.open(i,t)})}));var t=document.querySelector("body #bx-panel"),l=document.querySelector(".header");t&&(l.style.top="40px");new Swiper(".team",{slidesPerView:3,spaceBetween:30,navigation:{nextEl:".team__btn-next",prevEl:".team__btn-prev"},pagination:{el:".team__pagination",clickable:!0},breakpoints:{320:{slidesPerView:1},480:{slidesPerView:2},992:{slidesPerView:3}}}),new Swiper(".history-company",{effect:"cube",grabCursor:!0,cubeEffect:{shadow:!0,slideShadows:!0,shadowOffset:20,shadowScale:.94},navigation:{nextEl:".history-company__btn-next",prevEl:".history-company__btn-prev"},pagination:{el:".history-company__pagination",clickable:!0}}),new Swiper(".awards",{slidesPerView:5,loop:!0,speed:1e3,spaceBetween:30,navigation:{nextEl:".awards__btn-next",prevEl:".awards__btn-prev"},autoplay:{delay:3e3},breakpoints:{991:{slidesPerView:5},767:{slidesPerView:3},575:{slidesPerView:2},320:{slidesPerView:1}}}),new Swiper(".partners__brand",{slidesPerView:5,loop:!0,speed:3e3,spaceBetween:30,autoplay:{delay:5e3},breakpoints:{991:{slidesPerView:5},767:{slidesPerView:3},575:{slidesPerView:2},320:{slidesPerView:1}}});var c=new SwiperAnimation,d=(new Swiper(".slider-main",{speed:1e3,autoplay:{delay:8e3},on:{init:function(){c.init(this).animate()},slideChange:function(){c.init(this).animate()}}}),document.getElementById("preloader"));d&&setInterval(function(){d.style.opacity="0",d.addEventListener("transitionend",function(){return d.style.display="none"})},200);var u={navBar:document.querySelector(".navbar"),navBarMenu:document.querySelector(".navbar__nav"),navBarBurger:document.querySelector(".navbar__burger"),navBarChevron:document.querySelectorAll(".navbar__nav-dropdown-chevron")};u.navBarChevron.forEach(function(e){e.addEventListener("click",function(){e.classList.toggle("open")})});var p,f=document.querySelector("body");f&&f.classList.remove("preload"),p=document.querySelector(".scroll-top"),window.addEventListener("scroll",function(){110<=pageYOffset?p.classList.add("open"):p.classList.remove("open")}),u.navBar&&window.addEventListener("scroll",function(){window.pageYOffset>u.navBar.offsetTop?u.navBar.classList.add("scroll"):u.navBar.classList.remove("scroll")}),document.querySelectorAll("[data-waypoint-to]").forEach(function(n){n.addEventListener("click",function(e){e.preventDefault();var r,a,s,t="#"+n.getAttribute("data-waypoint-to");t&&(e=function e(t){var n,i,o=t-(s=s||t);window.scrollTo(0,(n=o,i=r,t=a,(n/=1e3/2)<1?t/2*n*n+i:-t/2*(--n*(n-2)-1)+i)),o<1e3&&window.requestAnimationFrame(e)},t=document.querySelector(t).offsetTop,r=window.pageYOffset,a=t-r,s=null,window.requestAnimationFrame(e))})});var v,m;v=u.navBarBurger,m=u.navBarMenu,v&&m&&v.addEventListener("click",function(e){m.classList.toggle("show"),v.classList.toggle("active"),e.stopPropagation()}),u.navBarMenu&&f.addEventListener("click",function(e){e.target.closest(".navbar__nav")||(u.navBarMenu.classList.remove("show"),u.navBarBurger.classList.remove("active"))});var h=document.querySelectorAll(".popup-link"),y=document.querySelectorAll(".lock-padding");f.classList.remove("preload");var g=!0,w=800;if(0<h.length)for(var S=0;S<h.length;S++)!function(e){var n=h[e];n.addEventListener("click",function(e){var t=n.getAttribute("data-modal").replace("#","");console.log(t),L(document.getElementById(t)),e.preventDefault()})}(S);var _=document.querySelectorAll(".popup__close-icon");if(0<_.length)for(var b=0;b<_.length;b++)!function(e){var t=_[e];t.addEventListener("click",function(e){E(t.closest(".popup")),e.preventDefault()})}(b);function L(e){var t;e&&g&&((t=document.querySelector(".popup.popup-open"))?E(t,!1):function(){var e=window.innerWidth-document.querySelector(".layout").offsetWidth+"px";if(0<y.length)for(var t=0;t<y.length;t++)y[t].style.paddingRight=e;f.style.paddingRight=e,f.classList.add("lock"),g=!1,setTimeout(function(){g=!0},w)}(),e.classList.add("popup-open"),e.addEventListener("click",function(e){e.target.closest(".popup__content")||E(e.target.closest(".popup"))}))}function E(e,t){t=!(1<arguments.length&&void 0!==t)||t;g&&(e.classList.remove("popup-open"),t&&(setTimeout(function(){if(0<y.length)for(var e=0;e<y.length;e++)y[e].style.paddingRight="0px";f.style.paddingRight="0px",f.classList.remove("lock")},w),g=!1,setTimeout(function(){g=!0},w)))}document.addEventListener("keydown",function(e){27!==e.which||(e=document.querySelector(".popup.popup-open"))&&E(e)});var t=document.querySelector(".navbar-search__icon"),q=document.querySelector(".navbar-search__form"),l=document.querySelector(".navbar-search__close");t&&(t.addEventListener("click",function(){q.classList.add("open")}),f.addEventListener("click",function(e){e.target.closest(".navbar-search")||q.classList.remove("open")}),l.addEventListener("click",function(){q.classList.remove("open")}));var k=!1;window.addEventListener("scroll",function(){var e,t,n=document.querySelector("body #ajax_next_page");n&&!k&&(e=n.getAttribute("href"),t=n.offsetTop,window.pageYOffset>=t-window.screen.height&&(k=!0,fetch(e,{method:"POST",body:"IS_AJAX=Y",headers:{"content-type":"application/x-www-form-urlencoded"}}).then(function(e){e.text().then(function(e){n.insertAdjacentHTML("beforebegin",e),n.remove(),k=!1})})))})});