"use strict";function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classPrivateFieldGet(e,t){return _classApplyDescriptorGet(e,_classExtractFieldDescriptor(e,t,"get"))}function _classApplyDescriptorGet(e,t){return t.get?t.get.call(e):t.value}function _classPrivateFieldSet(e,t,n){return _classApplyDescriptorSet(e,_classExtractFieldDescriptor(e,t,"set"),n),n}function _classExtractFieldDescriptor(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function _classApplyDescriptorSet(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}document.addEventListener("DOMContentLoaded",function(){var i=new WeakMap,e=function(){function n(e,t){_classCallCheck(this,n),i.set(this,{writable:!0,value:0}),this.form=e,this.fields=t}return _createClass(n,[{key:"initialize",value:function(){this.validateOnEntry(),this.validateOnSubmit()}},{key:"validateOnSubmit",value:function(){var o=this,a=this;this.form.addEventListener("submit",function(e){e.preventDefault(),_classPrivateFieldSet(o,i,0),a.fields.forEach(function(e){e=o.form.elements[e];e&&a.validateFields(e)});var t,n,r,e=new FormData(o.form);0===_classPrivateFieldGet(o,i)&&(t=o.form.parentElement.querySelector(".form__upload-file"),n=o.form.parentElement.querySelector(".btn"),document.querySelector(".popup.popup-open"),r=document.querySelector("#successSend"),n.classList.add("btn_point-none"),fetch("/send-letter.php",{method:"POST",body:e}).then(function(e){return e.json()}).then(function(e){console.log(e),t&&(t.innerHTML="Или прикрепить файл"),o.form.reset(),n.classList.remove("btn_point-none"),setTimeout(function(){E(r)},1e3)}).catch(function(e){console.error(e),console.log("wrong"),n.classList.remove("btn_point-none")}))})}},{key:"validateOnEntry",value:function(){var n=this,r=this;this.fields.forEach(function(e){var t=n.form.elements[e];t&&t.addEventListener("input",function(e){r.validateFields(t)})})}},{key:"validateFields",value:function(e){""===e.value.trim()?("en"===this.form.dataset.language?this.setStatus(e,"".concat(e.nextElementSibling.innerText," cannot be blank"),"error"):this.setStatus(e,"".concat(e.nextElementSibling.innerText," не может быть пустым"),"error"),_classPrivateFieldSet(this,i,1+ +_classPrivateFieldGet(this,i))):"email"===e.type?/\S+@\S+\.\S+/.test(e.value)?this.setStatus(e,null,"success"):(this.setStatus(e,"Введите корректный email","error"),_classPrivateFieldSet(this,i,1+ +_classPrivateFieldGet(this,i))):this.setStatus(e,null,"success")}},{key:"setStatus",value:function(e,t,n){var r=e.parentElement.querySelector(".icon-success"),o=e.parentElement.querySelector(".icon-error"),a=e.parentElement.querySelector(".error-message");"success"===n&&(o&&o.classList.add("hidden"),a&&(a.innerText=""),r.classList.remove("hidden"),e.classList.remove("input-error")),"error"===n&&(r&&r.classList.add("hidden"),e.parentElement.querySelector(".error-message").innerText=t,o.classList.remove("hidden"),e.classList.add("input-error"))}}]),n}(),t=document.querySelector("#formOne");t&&new e(t,["fio","email","company","comment"]).initialize();t=document.querySelector("#formTwo");t&&new e(t,["fio","email","company","comment"]).initialize();t=document.querySelector("#formThree");t&&new e(t,["fio","email","company","comment"]).initialize();t=document.querySelector("#formFour");t&&new e(t,["fio","email","phone"]).initialize();t=document.querySelector("#formFive");t&&new e(t,["fio","email","phone"]).initialize();t=document.querySelectorAll(".js-policy");t&&t.forEach(function(n){n.addEventListener("click",function(){var e=n.checked,t=n.parentNode.nextElementSibling.childNodes[1];e?t&&t.removeAttribute("disabled"):t&&t.setAttribute("disabled","disabled")})});t=document.querySelectorAll(".inputFile");Array.prototype.forEach.call(t,function(e){var n=e.nextElementSibling,r=n.innerHTML;e.addEventListener("change",function(e){var t="";(t=this.files&&1<this.files.length?(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value.split("\\").pop())?n.querySelector("span").innerHTML=t:n.innerHTML=r})});var o,n,a,r,l,s=document.querySelector("#google-map");s&&(c=document.querySelectorAll(".rd-google-map__locations"),console.log(c),n={lat:55.7541938,lng:41.9875404},a={info:{icon:"/local/templates/innodata/dist/images/map-marker.svg"}},r=[{popupInfo:c,LatLng:[{lat:55.810558,lng:37.524379}],type:"info"},{popupInfo:c,LatLng:[{lat:55.7518373,lng:48.7522174}],type:"info"}],console.log(window.innerWidth),l=6.3,window.innerWidth<800&&(l=4),o=new google.maps.Map(s,{zoom:l,center:n,scrollwheel:!1}),r.forEach(function(e,t){var n=new google.maps.Marker({position:e.LatLng[0],icon:a[e.type].icon,map:o}),r=new google.maps.InfoWindow({content:e.popupInfo[t].innerHTML});n.addListener("click",function(){r.open(o,n)})}));var t=document.querySelector("body #bx-panel"),c=document.querySelector(".header");t&&(c.style.top="40px");new Swiper(".team",{slidesPerView:3,spaceBetween:30,navigation:{nextEl:".team__btn-next",prevEl:".team__btn-prev"},pagination:{el:".team__pagination",clickable:!0},breakpoints:{320:{slidesPerView:1},480:{slidesPerView:2},992:{slidesPerView:3}}}),new Swiper(".history-company",{effect:"cube",grabCursor:!0,cubeEffect:{shadow:!0,slideShadows:!0,shadowOffset:20,shadowScale:.94},navigation:{nextEl:".history-company__btn-next",prevEl:".history-company__btn-prev"},pagination:{el:".history-company__pagination",clickable:!0}}),new Swiper(".awards",{slidesPerView:5,loop:!0,speed:1e3,spaceBetween:30,navigation:{nextEl:".awards__btn-next",prevEl:".awards__btn-prev"},autoplay:{delay:3e3},breakpoints:{991:{slidesPerView:5},767:{slidesPerView:3},575:{slidesPerView:2},320:{slidesPerView:1}}}),new Swiper(".partners__brand",{slidesPerView:5,loop:!0,speed:3e3,spaceBetween:30,autoplay:{delay:5e3},breakpoints:{991:{slidesPerView:5},767:{slidesPerView:3},575:{slidesPerView:2},320:{slidesPerView:1}}}),new Swiper(".clients__brand",{slidesPerView:4,loop:!0,speed:2e3,spaceBetween:30,autoplay:{delay:5e3},breakpoints:{991:{slidesPerView:4},767:{slidesPerView:3},575:{slidesPerView:2},320:{slidesPerView:1}}});var d=new SwiperAnimation,u=(new Swiper(".slider-main",{speed:1e3,autoplay:{delay:8e3},on:{init:function(){d.init(this).animate()},slideChange:function(){d.init(this).animate()}}}),document.getElementById("preloader"));u&&setInterval(function(){u.style.opacity="0",u.addEventListener("transitionend",function(){return u.style.display="none"})},200);var p={navBar:document.querySelector(".navbar"),navBarMenu:document.querySelector(".navbar__nav"),navBarBurger:document.querySelector(".navbar__burger"),navBarChevron:document.querySelectorAll(".navbar__nav-dropdown-chevron")};p.navBarChevron.forEach(function(e){e.addEventListener("click",function(){e.classList.toggle("open")})});var f,m=document.querySelector("body");m&&m.classList.remove("preload"),f=document.querySelector(".scroll-top"),window.addEventListener("scroll",function(){110<=pageYOffset?f.classList.add("open"):f.classList.remove("open")}),p.navBar&&window.addEventListener("scroll",function(){window.pageYOffset>p.navBar.offsetTop?p.navBar.classList.add("scroll"):p.navBar.classList.remove("scroll")}),document.querySelectorAll("[data-waypoint-to]").forEach(function(n){n.addEventListener("click",function(e){e.preventDefault();var a,i,l,t="#"+n.getAttribute("data-waypoint-to");t&&(e=function e(t){var n,r,o=t-(l=l||t);window.scrollTo(0,(n=o,r=a,t=i,(n/=1e3/2)<1?t/2*n*n+r:-t/2*(--n*(n-2)-1)+r)),o<1e3&&window.requestAnimationFrame(e)},t=document.querySelector(t).offsetTop,a=window.pageYOffset,i=t-a,l=null,window.requestAnimationFrame(e))})});var v,y;v=p.navBarBurger,y=p.navBarMenu,v&&y&&v.addEventListener("click",function(e){y.classList.toggle("show"),v.classList.toggle("active"),e.stopPropagation()}),p.navBarMenu&&m.addEventListener("click",function(e){e.target.closest(".navbar__nav")||(p.navBarMenu.classList.remove("show"),p.navBarBurger.classList.remove("active"))});var h=document.querySelectorAll(".popup-link"),g=document.querySelectorAll(".lock-padding");m.classList.remove("preload");var w=!0,S=800;if(0<h.length)for(var _=0;_<h.length;_++)!function(e){var n=h[e];n.addEventListener("click",function(e){var t=n.getAttribute("data-modal").replace("#","");console.log(t),E(document.getElementById(t)),e.preventDefault()})}(_);var b=document.querySelectorAll(".popup__close-icon");if(0<b.length)for(var L=0;L<b.length;L++)!function(e){var t=b[e];t.addEventListener("click",function(e){q(t.closest(".popup")),e.preventDefault()})}(L);function E(e){var t;e&&w&&((t=document.querySelector(".popup.popup-open"))?q(t,!1):function(){var e=window.innerWidth-document.querySelector(".layout").offsetWidth+"px";if(0<g.length)for(var t=0;t<g.length;t++)g[t].style.paddingRight=e;m.style.paddingRight=e,m.classList.add("lock"),w=!1,setTimeout(function(){w=!0},S)}(),e.classList.add("popup-open"),e.addEventListener("click",function(e){e.target.closest(".popup__content")||q(e.target.closest(".popup"))}))}function q(e,t){t=!(1<arguments.length&&void 0!==t)||t;w&&(e.classList.remove("popup-open"),t&&(setTimeout(function(){if(0<g.length)for(var e=0;e<g.length;e++)g[e].style.paddingRight="0px";m.style.paddingRight="0px",m.classList.remove("lock")},S),w=!1,setTimeout(function(){w=!0},S)))}document.addEventListener("keydown",function(e){27!==e.which||(e=document.querySelector(".popup.popup-open"))&&q(e)});var t=document.querySelector(".navbar-search__icon"),k=document.querySelector(".navbar-search__form"),c=document.querySelector(".navbar-search__close");t&&(t.addEventListener("click",function(){k.classList.add("open")}),m.addEventListener("click",function(e){e.target.closest(".navbar-search")||k.classList.remove("open")}),c.addEventListener("click",function(){k.classList.remove("open")}));var A=!1;if(window.addEventListener("scroll",function(){var e,t,n=document.querySelector("body #ajax_next_page");n&&!A&&(e=n.getAttribute("href"),t=n.offsetTop,window.pageYOffset>=t-window.screen.height&&(A=!0,fetch(e,{method:"POST",body:"IS_AJAX=Y",headers:{"content-type":"application/x-www-form-urlencoded"}}).then(function(e){e.text().then(function(e){n.insertAdjacentHTML("beforebegin",e),n.remove(),A=!1})})))}),"loading"in HTMLImageElement.prototype){var T,P=function(e){e.currentTarget.parentNode.classList.remove("lazyImageWaiting")},x=function(e){var t=e.currentTarget.parentNode;t.classList.remove("lazyImageWaiting"),t.classList.add("lazyImageError"),setTimeout(function(){t.classList.add("lazyImageErrorShow")},60)},B=_createForOfIteratorHelper(document.querySelectorAll(".lazyImage img"));try{for(B.s();!(T=B.n()).done;){var F=T.value;F.complete||(F.parentNode.classList.add("lazyImageWaiting"),F.addEventListener("load",P,!1),F.addEventListener("error",x,!1))}}catch(e){B.e(e)}finally{B.f()}}var I=document.querySelectorAll(".solution-filter__tag a"),V=document.querySelector(".solution-filter__overlay-show");V&&V.addEventListener("click",function(){"Показать все"==V.textContent?V.textContent="Не показывать все":V.textContent="Показать все",I.length&&I.forEach(function(e,t){9<t&&e.classList.toggle("hide")})}),I.length&&I.forEach(function(e,t){9<t&&e.classList.add("hide")})});