"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classPrivateFieldGet(e,t){return _classApplyDescriptorGet(e,_classExtractFieldDescriptor(e,t,"get"))}function _classApplyDescriptorGet(e,t){return t.get?t.get.call(e):t.value}function _classPrivateFieldSet(e,t,n){return _classApplyDescriptorSet(e,_classExtractFieldDescriptor(e,t,"set"),n),n}function _classExtractFieldDescriptor(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function _classApplyDescriptorSet(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}document.addEventListener("DOMContentLoaded",function(){var i=new WeakMap,e=function(){function n(e,t){_classCallCheck(this,n),i.set(this,{writable:!0,value:0}),this.form=e,this.fields=t}return _createClass(n,[{key:"initialize",value:function(){this.validateOnEntry(),this.validateOnSubmit()}},{key:"validateOnSubmit",value:function(){var t=this,n=this;this.form.addEventListener("submit",function(e){e.preventDefault(),_classPrivateFieldSet(t,i,0),n.fields.forEach(function(e){e=t.form.elements[e];e&&n.validateFields(e)});e=new FormData(t.form);console.log(e),0===_classPrivateFieldGet(t,i)&&fetch("/send-letter.php",{method:"POST",body:e}).then(function(e){return e.json()}).then(function(e){console.log(e.message)})})}},{key:"validateOnEntry",value:function(){var n=this,i=this;this.fields.forEach(function(e){var t=n.form.elements[e];t&&t.addEventListener("input",function(e){i.validateFields(t)})})}},{key:"validateFields",value:function(e){""===e.value.trim()?(this.setStatus(e,"".concat(e.nextElementSibling.innerText," не может быть пустым"),"error"),_classPrivateFieldSet(this,i,1+ +_classPrivateFieldGet(this,i))):"email"===e.type?/\S+@\S+\.\S+/.test(e.value)?this.setStatus(e,null,"success"):(this.setStatus(e,"Введите корректный email","error"),_classPrivateFieldSet(this,i,1+ +_classPrivateFieldGet(this,i))):this.setStatus(e,null,"success")}},{key:"setStatus",value:function(e,t,n){var i=e.parentElement.querySelector(".icon-success"),r=e.parentElement.querySelector(".icon-error"),a=e.parentElement.querySelector(".error-message");"success"===n&&(r&&r.classList.add("hidden"),a&&(a.innerText=""),i.classList.remove("hidden"),e.classList.remove("input-error")),"error"===n&&(i&&i.classList.add("hidden"),e.parentElement.querySelector(".error-message").innerText=t,r.classList.remove("hidden"),e.classList.add("input-error"))}}]),n}(),t=document.querySelector("#formOne");t&&new e(t,["fio","email","company","comment"]).initialize();t=document.querySelector("#formTwo");t&&new e(t,["fio","email","company","comment"]).initialize();t=document.querySelector("#formThree");t&&new e(t,["fio","field_activity","email","company","comment"]).initialize();t=document.querySelector("#formFour");t&&new e(t,["fio","email","link","phone"]).initialize();t=document.querySelector("#formFive");t&&new e(t,["fio","email","link","phone"]).initialize();t=document.querySelectorAll(".js-policy");t&&t.forEach(function(n){n.addEventListener("click",function(){var e=n.checked,t=n.parentNode.nextElementSibling.childNodes[1];e?t&&t.removeAttribute("disabled"):t&&t.setAttribute("disabled","disabled")})});t=document.querySelectorAll(".inputFile");Array.prototype.forEach.call(t,function(e){var n=e.nextElementSibling,i=n.innerHTML;e.addEventListener("change",function(e){var t="";(t=this.files&&1<this.files.length?(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value.split("\\").pop())?n.querySelector("span").innerHTML=t:n.innerHTML=i})});var r,n,a,o,s=document.querySelector("#google-map");s&&(k=document.querySelector(".rd-google-map__locations").innerHTML,a={info:{icon:"dist/images/map-marker.svg"}},o=[{popupInfo:k,LatLng:[{lat:(n={lat:55.7518373,lng:48.7522174}).lat,lng:n.lng}],type:"info"}],r=new google.maps.Map(s,{zoom:17,center:n,scrollwheel:!1}),o.forEach(function(e){var t=new google.maps.Marker({position:e.LatLng[0],icon:a[e.type].icon,map:r}),n=new google.maps.InfoWindow({content:e.popupInfo});t.addListener("click",function(){n.open(r,t)})}));new Swiper(".team",{slidesPerView:3,spaceBetween:30,navigation:{nextEl:".team__btn-next",prevEl:".team__btn-prev"},pagination:{el:".team__pagination",clickable:!0},breakpoints:{320:{slidesPerView:1},480:{slidesPerView:2},992:{slidesPerView:3}}}),new Swiper(".history-company",{effect:"cube",grabCursor:!0,cubeEffect:{shadow:!0,slideShadows:!0,shadowOffset:20,shadowScale:.94},navigation:{nextEl:".history-company__btn-next",prevEl:".history-company__btn-prev"},pagination:{el:".history-company__pagination",clickable:!0}}),new Swiper(".awards",{slidesPerView:5,loop:!0,speed:1e3,spaceBetween:30,navigation:{nextEl:".awards__btn-next",prevEl:".awards__btn-prev"},autoplay:{delay:3e3},breakpoints:{991:{slidesPerView:5},767:{slidesPerView:3},575:{slidesPerView:2},320:{slidesPerView:1}}}),new Swiper(".partners__brand",{slidesPerView:5,loop:!0,speed:3e3,spaceBetween:30,autoplay:{delay:5e3},breakpoints:{991:{slidesPerView:5},767:{slidesPerView:3},575:{slidesPerView:2},320:{slidesPerView:1}}});var l=new SwiperAnimation,c=(new Swiper(".slider-main",{speed:1e3,autoplay:{delay:8e3},on:{init:function(){l.init(this).animate()},slideChange:function(){l.init(this).animate()}}}),document.getElementById("preloader"));c&&setInterval(function(){c.style.opacity="0",c.addEventListener("transitionend",function(){return c.style.display="none"})},200);var d={navBar:document.querySelector(".navbar"),navBarMenu:document.querySelector(".navbar__nav"),navBarBurger:document.querySelector(".navbar__burger"),navBarChevron:document.querySelectorAll(".navbar__nav-dropdown-chevron")};d.navBarChevron.forEach(function(e){e.addEventListener("click",function(){e.classList.toggle("open")})});var u,p=document.querySelector("body");p&&p.classList.remove("preload"),u=document.querySelector(".scroll-top"),window.addEventListener("scroll",function(){110<=pageYOffset?u.classList.add("open"):u.classList.remove("open")}),d.navBar&&window.addEventListener("scroll",function(){window.pageYOffset>d.navBar.offsetTop?d.navBar.classList.add("scroll"):d.navBar.classList.remove("scroll")}),document.querySelectorAll("[data-waypoint-to]").forEach(function(n){n.addEventListener("click",function(e){e.preventDefault();var a,o,s,t="#"+n.getAttribute("data-waypoint-to");t&&(e=function e(t){var n,i,r=t-(s=s||t);window.scrollTo(0,(n=r,i=a,t=o,(n/=1e3/2)<1?t/2*n*n+i:-t/2*(--n*(n-2)-1)+i)),r<1e3&&window.requestAnimationFrame(e)},t=document.querySelector(t).offsetTop,a=window.pageYOffset,o=t-a,s=null,window.requestAnimationFrame(e))})});var v,f;v=d.navBarBurger,f=d.navBarMenu,v&&f&&v.addEventListener("click",function(e){f.classList.toggle("show"),v.classList.toggle("active"),e.stopPropagation()}),d.navBarMenu&&p.addEventListener("click",function(e){e.target.closest(".navbar__nav")||(d.navBarMenu.classList.remove("show"),d.navBarBurger.classList.remove("active"))});var m=document.querySelectorAll(".popup-link"),h=document.querySelectorAll(".lock-padding");p.classList.remove("preload");var y=!0,g=800;if(0<m.length)for(var w=function(e){var n=m[e];n.addEventListener("click",function(e){var t=n.getAttribute("data-modal").replace("#","");console.log(t),function(e){{var t;e&&y&&((t=document.querySelector(".popup.popup-open"))?E(t,!1):function(){var e=window.innerWidth-document.querySelector(".layout").offsetWidth+"px";if(0<h.length)for(var t=0;t<h.length;t++)h[t].style.paddingRight=e;p.style.paddingRight=e,p.classList.add("lock"),y=!1,setTimeout(function(){y=!0},g)}(),e.classList.add("popup-open"),e.addEventListener("click",function(e){e.target.closest(".popup__content")||E(e.target.closest(".popup"))}))}}(document.getElementById(t)),e.preventDefault()})},_=0;_<m.length;_++)w(_);var S=document.querySelectorAll(".popup__close-icon");if(0<S.length)for(var L=0;L<S.length;L++)!function(e){var t=S[e];t.addEventListener("click",function(e){E(t.closest(".popup")),e.preventDefault()})}(L);function E(e,t){t=!(1<arguments.length&&void 0!==t)||t;y&&(e.classList.remove("popup-open"),t&&(setTimeout(function(){if(0<h.length)for(var e=0;e<h.length;e++)h[e].style.paddingRight="0px";p.style.paddingRight="0px",p.classList.remove("lock")},g),y=!1,setTimeout(function(){y=!0},g)))}document.addEventListener("keydown",function(e){27!==e.which||(e=document.querySelector(".popup.popup-open"))&&E(e)});var t=document.querySelector(".navbar-search__icon"),b=document.querySelector(".navbar-search__form"),k=document.querySelector(".navbar-search__close");t&&(t.addEventListener("click",function(){b.classList.add("open")}),p.addEventListener("click",function(e){e.target.closest(".navbar-search")||b.classList.remove("open")}),k.addEventListener("click",function(){b.classList.remove("open")}))});